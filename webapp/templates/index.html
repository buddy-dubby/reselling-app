{% extends "base.html" %}

{% block title %}Inventory{% endblock %}

{% block content %}
<div class="card">
    <h2 style="margin-bottom: 20px;">Your Inventory ({{ items|length }} items)</h2>
    
    {% if items %}
    <div class="item-grid">
        {% for item in items %}
        <a href="/item/{{ item.id }}" class="item-card" style="text-decoration: none; color: inherit;">
            {% if item.photos %}
            <img src="/uploads/{{ item.photos[0] }}" alt="{{ item.name }}">
            {% else %}
            <div class="placeholder-img">ðŸ‘—</div>
            {% endif %}
            <div class="item-card-body">
                <h3>{{ item.name }}</h3>
                <div class="brand">{{ item.brand or 'No brand' }}</div>
                {% if item.target_price %}
                <div class="price">${{ "%.2f"|format(item.target_price) }}</div>
                {% else %}
                <div class="price" style="color: #888;">No price set</div>
                {% endif %}
                <span class="status-badge status-{{ item.status }}">{{ item.status }}</span>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <h2>No items yet!</h2>
        <p>Add your first item to start tracking</p>
        <a href="/add" class="btn btn-primary" style="display: inline-block; margin-top: 20px;">+ Add First Item</a>
    </div>
    {% endif %}
</div>

{% if items %}
<div class="card" style="text-align: center;">
    <h3 style="margin-bottom: 15px;">Quick Stats</h3>
    <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px;">
        <div>
            <div style="font-size: 2em; font-weight: bold; color: #4ade80;">
                ${{ "%.2f"|format(items|selectattr('target_price')|map(attribute='target_price')|sum) }}
            </div>
            <div style="color: #888; font-size: 0.9em;">Total Value</div>
        </div>
        <div>
            <div style="font-size: 2em; font-weight: bold; color: #fbbf24;">
                {{ items|selectattr('status', 'equalto', 'unlisted')|list|length }}
            </div>
            <div style="color: #888; font-size: 0.9em;">Unlisted</div>
        </div>
        <div>
            <div style="font-size: 2em; font-weight: bold; color: #60a5fa;">
                {{ items|selectattr('status', 'equalto', 'listed')|list|length }}
            </div>
            <div style="color: #888; font-size: 0.9em;">Listed</div>
        </div>
        <div>
            <div style="font-size: 2em; font-weight: bold; color: #a78bfa;">
                {{ items|selectattr('status', 'equalto', 'sold')|list|length }}
            </div>
            <div style="color: #888; font-size: 0.9em;">Sold</div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
